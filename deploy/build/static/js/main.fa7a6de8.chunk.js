(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/default.da88e5bc.jpg"},37:function(e,t,a){},42:function(e,t,a){e.exports=a(73)},63:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(38),s=a.n(c),o=a(4),l=a(7),u=a(1),m=a(5),i=a.n(m),p=(a(63),a(21));var d=function(e){var t=e.post;return n.a.createElement("div",{className:"post"},n.a.createElement("p",{className:"post_image"},t.image&&n.a.createElement(o.b,{to:"/post/".concat(t.title.toLowerCase().split(" ").join("-"),"-").concat(t._id)},n.a.createElement("img",{src:"".concat("https://socialnetwork-mats.herokuapp.com","/posts/image=").concat(t._id),className:"img-fluid"}))),n.a.createElement(o.b,{to:"/post/".concat(t.title.toLowerCase().split(" ").join("-"),"-").concat(t._id)},n.a.createElement("h2",{className:"post_title"},t.title)),n.a.createElement("div",{className:"post_user"},n.a.createElement(o.b,{to:"user/".concat(t.username)},n.a.createElement("img",{src:"".concat("https://socialnetwork-mats.herokuapp.com","/users/photo/").concat(t.userId),className:"post_user--avatar"})),n.a.createElement("div",null,n.a.createElement(o.b,{to:"user/".concat(t.username),tclassName:"post_user--name"},t.postedBy),n.a.createElement("p",{className:"post_user--time"},p(t.createdAt).format("D MMMM YYYY")))))};var h=function(){var e=Object(r.useState)(),t=Object(u.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(2),o=Object(u.a)(s,2),l=o[0],m=o[1];return Object(r.useEffect)((function(){i.a.get("".concat("https://socialnetwork-mats.herokuapp.com","/posts?limit=").concat(l)).then((function(e){var t=e.data;return c(t)})).catch((function(e){return console.log(e)}))}),[l]),a?(window.onscroll=function(e){window.innerHeight+window.scrollY>=document.body.offsetHeight&&m(l+2)},n.a.createElement("div",{className:"container"},a.map((function(e){return n.a.createElement(d,{post:e})})))):n.a.createElement("div",null)},b=a(2),f=a.n(b),E=a(6),g=a(15),w=a(14),v=a(40),j=a(41);var O=function(e){return"email"===e?{pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Invalid email address."}}:{maxLength:{value:36,message:"".concat(e," is too long. Maximum length is 36.")}}},k=function(e){var t=e.type,a=e.name,c=e.register,s=e.errors,o=a.toLowerCase(),l=Object(r.useState)(!0),m=Object(u.a)(l,2),i=m[0],p=m[1];return n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},a),"Body"!==a?n.a.createElement("input",{type:!0===i&&["password","new password"].includes(o)?"password":"text",className:"form-control",name:o,ref:c(Object(w.a)({required:"".concat(a," is required"),minLength:{value:6,message:"".concat(a," is too short. Minimum length is 6.")}},O(o)))}):n.a.createElement("textarea",{style:{height:200},type:!0===i&&["password","new password"].includes(o)?"password":"text",className:"form-control",name:o,ref:c({required:"".concat(a," is required"),minLength:{value:12,message:"".concat(a," is too short. Minimum length is 12.")}})}),"password"===t&&n.a.createElement(v.a,{icon:j.a,onClick:function(){return p(!i)}}),s[o]&&n.a.createElement("p",{style:{color:"red"}},s[o].message))};var N=function(){var e=Object(g.a)(),t=e.register,a=e.handleSubmit,c=e.errors,s=Object(r.useState)({text:null,color:"green"}),o=Object(u.a)(s,2),m=o[0],p=o[1],d=Object(l.f)(),h=function(){var e=Object(E.a)(f.a.mark((function e(t){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("".concat("https://socialnetwork-mats.herokuapp.com","/users/signup"),t);case 3:a=e.sent,r=a.data,r.user,localStorage.setItem("jwt",JSON.stringify(r)),d.push("/"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),p({text:"Email already used",color:"red"});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"container"},n.a.createElement("h2",{className:"mt-5 mb-5"},"Signup"),n.a.createElement("form",{onSubmit:a(h)},n.a.createElement(k,{type:"email",name:"Email",register:t,errors:c}),n.a.createElement(k,{type:"text",name:"Username",register:t,errors:c}),n.a.createElement(k,{type:"text",name:"Name",register:t,errors:c}),n.a.createElement(k,{type:"password",name:"Password",register:t,errors:c}),n.a.createElement("p",{style:{color:m.color}},m.text),n.a.createElement("button",{className:"btn btn-raised btn-primary"},"Submit")))};var y=function(){var e=Object(g.a)(),t=e.register,a=e.handleSubmit,c=e.errors,s=Object(r.useState)({text:null,color:"green"}),o=Object(u.a)(s,2),m=o[0],p=o[1],d=Object(l.f)(),h=function(){var e=Object(E.a)(f.a.mark((function e(t){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("".concat("https://socialnetwork-mats.herokuapp.com","/users/signin"),t);case 3:a=e.sent,r=a.data,localStorage.setItem("jwt",JSON.stringify(r)),d.push("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),p({text:"The username and password doesn't match",color:"red"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"container"},n.a.createElement("h2",{className:"mt-5 mb-5"},"Signin"),n.a.createElement("form",{onSubmit:a(h)},n.a.createElement(k,{type:"text",name:"Username",register:t,errors:c}),n.a.createElement(k,{type:"password",name:"Password",register:t,errors:c}),n.a.createElement("p",{style:{color:m.color}},m.text),n.a.createElement("button",{className:"btn btn-raised btn-primary"},"Submit")))},S=a(20),x=a.n(S);a(37);var _=function(e){var t=e.pathname,a=e.auth,c=e.signOut,s=a.user,m=JSON.parse(localStorage.getItem("jwt")),i=Object(r.useState)(m.user._id?"".concat("https://socialnetwork-mats.herokuapp.com","/users/photo/").concat(m.user._id):x.a),p=Object(u.a)(i,2),d=p[0];p[1],console.log(d);var h=Object(l.f)();return n.a.createElement(n.a.Fragment,null,["/signin","/signup"].includes(t)&&h.push("/"),n.a.createElement(o.b,{to:"/user/post/".concat(m.user._id),className:"header_addnew"},n.a.createElement("i",{class:"fas fa-plus"})),n.a.createElement("div",{className:"dropdown header_user"},n.a.createElement("div",{className:"dropdown-toggle header_user--dropdown",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n.a.createElement("img",{src:d,className:"header_user--avatar"}),n.a.createElement("p",{className:"header_user--username"},s.name),n.a.createElement("i",{className:"fas fa-angle-down"})),n.a.createElement("div",{className:"dropdown-menu ","aria-labelledby":"dropdownMenuButton"},n.a.createElement("div",{className:"nav_dropdown"},n.a.createElement(o.b,{to:"/user/".concat(s.username)},"Profile"),n.a.createElement(o.b,{onClick:c},"Sign out")))))};var I=function(e){return e.pathname,n.a.createElement("div",null,n.a.createElement(o.b,{to:"/signin",className:"header_signin"},"Sign in"),n.a.createElement(o.b,{to:"/signup",className:"header_signup"},"Sign up"))};var P=function(){var e=Object(l.g)().pathname,t=Object(l.f)(),a=Object(g.a)(),r=a.register,c=a.handleSubmit,s=function(){var e=Object(E.a)(f.a.mark((function e(a){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.name,t.push("/users/find=".concat(r));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=JSON.parse(localStorage.getItem("jwt"));return n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"header_logo"},n.a.createElement(o.b,{exact:!0,to:"/"},"Author")),n.a.createElement("form",{onSubmit:c(s),className:"header_searchform"},n.a.createElement("input",{type:"text",ref:r,name:"name"}),n.a.createElement("button",{className:"header_searchform--button"},n.a.createElement("i",{class:"fas fa-search"}))),n.a.createElement("div",{className:"header_menu"},n.a.createElement(o.b,{exact:!0,to:"/",className:"header_home"},n.a.createElement("i",{class:"fas fa-home"})),u?n.a.createElement(_,{pathname:e,auth:u,signOut:function(){return window&&localStorage.removeItem("jwt"),t.push("/"),i.a.get("".concat("https://socialnetwork-mats.herokuapp.com","/users/signout"))}}):n.a.createElement(I,{pathname:e})))};a(72);var C=function(){var e=Object(r.useState)({}),t=Object(u.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(JSON.parse(localStorage.getItem("jwt"))),m=Object(u.a)(s,2),h=m[0],b=(m[1],Object(l.h)().userId),g=Object(r.useState)(),w=Object(u.a)(g,2),v=w[0],j=w[1],O=Object(r.useState)([]),k=Object(u.a)(O,2),N=k[0],y=k[1],S=Object(r.useState)(!1),x=Object(u.a)(S,2),_=x[0],I=x[1];Object(r.useEffect)((function(){i.a.get("".concat("https://socialnetwork-mats.herokuapp.com","/users/username=").concat(b),{headers:{Accept:"application/json","Content-type":"application/json"}}).then((function(e){var t=e.data;c(t),j("".concat("https://socialnetwork-mats.herokuapp.com","/users/photo/").concat(t._id)),I(h.user.following.includes(t.username))})).catch((function(e){return console.log(e.message)})),i.a.get("".concat("https://socialnetwork-mats.herokuapp.com","/posts/user?username=").concat(b,"&limit=2")).then((function(e){var t=e.data;y(t)})).catch((function(e){return console.log(e)}))}),[]);var P=function(){var e=Object(E.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={id:h.user._id},e.next=4,i.a.post("".concat("https://socialnetwork-mats.herokuapp.com","/users/follow/").concat(a._id),r);case 4:h.user.following.includes(a.username)?(h.user.following.pop(a.username),a.followers-=1):(h.user.following.push(a.username),a.followers+=1),localStorage.setItem("jwt",JSON.stringify(h)),I(!_),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return a?n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"user"},n.a.createElement("div",{className:"user_details"},n.a.createElement("div",{className:"user_details--info"},n.a.createElement("p",{className:"user_avatar"},n.a.createElement("img",{src:v,className:"img-fluid"})),n.a.createElement("p",{className:"user_name"},"Name: ",a.name),n.a.createElement("p",{className:"user_email"},"Email: ",a.email),n.a.createElement("p",{className:"user_followers"},"Followers: ",a.followers),n.a.createElement("p",{className:"user_joined"},"Joined ",p(a.createdAt).format("D MMMM YYYY"))),n.a.createElement("div",{className:"user_details--buttons"},h&&b===h.user.username?n.a.createElement(n.a.Fragment,null,n.a.createElement(o.b,{to:"/user/edit/".concat(a._id),className:"btn btn-primary"},"Edit"),n.a.createElement(o.b,{to:"/user/delete/".concat(a._id),className:"btn btn-primary"},"Delete")):h&&n.a.createElement("button",{className:"btn btn-primary",onClick:P},"Follow",_?"ing":""))),n.a.createElement("div",{className:"user_posts"},N.map((function(e){return n.a.createElement(d,{post:e})}))))):n.a.createElement("div",null)};var J=function(){var e=Object(l.h)().name,t=Object(l.g)(),a=Object(l.f)(),c=Object(r.useState)(t.pathname),s=Object(u.a)(c,2),m=s[0],p=(s[1],Object(r.useState)([])),d=Object(u.a)(p,2),h=d[0],b=d[1];return m!==t.pathname&&a.go(),Object(r.useEffect)((function(){i.a.get("".concat("https://socialnetwork-mats.herokuapp.com","/users/find?name=").concat(e)).then((function(e){var t=e.data;return b(t)})).catch((function(e){return console.log(e.message)}))}),[]),n.a.createElement("div",null,h.map((function(e){return n.a.createElement("div",null,n.a.createElement("img",{src:"".concat("https://socialnetwork-mats.herokuapp.com","/users/photo/").concat(e._id),style:{width:100}}),n.a.createElement(o.b,{to:"/user/".concat(e.username)},e.name))})))};var M=function(){var e=Object(l.f)(),t=Object(l.h)().userId,a=JSON.parse(localStorage.getItem("jwt")),c=Object(r.useState)({pass:null,error:""}),s=Object(u.a)(c,2),o=s[0],m=s[1],p=function(){var r=Object(E.a)(f.a.mark((function r(n){var c;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),c=o.pass){r.next=6;break}m(Object(w.a)(Object(w.a)({},o),{},{error:"Password is required"})),r.next=20;break;case 6:return r.prev=6,r.next=9,i.a.post("".concat("https://socialnetwork-mats.herokuapp.com","/users/confirm-password"),{id:t,password:c});case 9:return m(Object(w.a)(Object(w.a)({},o),{},{error:""})),r.next=12,i.a.delete("".concat("https://socialnetwork-mats.herokuapp.com","/users/id=").concat(t),{headers:{Authorization:"Bearer ".concat(a.token)}});case 12:localStorage.removeItem("jwt"),e.push("/"),alert("The user was successfully deleted."),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),m(Object(w.a)(Object(w.a)({},o),{},{error:"Password is incorrect"}));case 20:case"end":return r.stop()}}),r,null,[[6,17]])})));return function(e){return r.apply(this,arguments)}}();return n.a.createElement("div",null,n.a.createElement("form",null,n.a.createElement("label",{for:"password"},"Enter your password"),n.a.createElement("input",{type:"password",name:"password",onChange:function(e){e.preventDefault(),m(Object(w.a)(Object(w.a)({},o),{},{pass:e.target.value}))}}),n.a.createElement("p",{style:{color:"red"}},o.error),n.a.createElement("h2",null,"Are you sure you want to delete your account?"),n.a.createElement("button",{onClick:function(){return e.push("/")}},"No"),n.a.createElement("button",{onClick:p},"Yes")))};var A=function(e){var t=e.editName,a=Object(l.f)(),c=Object(g.a)(),s=c.register,o=c.handleSubmit,m=c.errors,p=Object(r.useState)(),d=Object(u.a)(p,2),h=d[0],b=d[1],w=Object(r.useState)(""),v=Object(u.a)(w,2),j=v[0],O=v[1],N=Object(l.h)().userId,y=JSON.parse(localStorage.getItem("jwt")).token,S=function(){var e=Object(E.a)(f.a.mark((function e(t){var r,n,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("".concat("https://socialnetwork-mats.herokuapp.com","/users/confirm-password"),{password:t.password,id:N});case 3:return r={Authorization:"Bearer ".concat(y)},e.next=6,i.a.post("".concat("https://socialnetwork-mats.herokuapp.com","/users/id=").concat(N),t,{headers:r});case 6:return b(""),O("Edit successfully"),e.next=10,i.a.get("".concat("https://socialnetwork-mats.herokuapp.com","/users/id=").concat(N),{headers:r});case 10:n=e.sent,c=n.data,console.log(c),localStorage.setItem("jwt",JSON.stringify({token:y,user:c})),a.go(),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(0),s="Request failed with status code 403"===e.t0.message,b(s?"Email already used":"Password is incorrect"),O();case 22:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",null,n.a.createElement("form",{onSubmit:o(S)},n.a.createElement("p",null,"Change the ",t.toLowerCase().replace("new",""),":"),n.a.createElement(k,{type:"NewPassword"===t?"password":"text",name:"NewPassword"===t?t.replace("P"," p"):t,register:s,errors:m}),h&&"E"===h[0]&&n.a.createElement("p",null,h),n.a.createElement(k,{type:"password",name:"Password",register:s,errors:m}),h&&"P"===h[0]&&n.a.createElement("p",null,h),n.a.createElement("p",null,j),n.a.createElement("button",null,"Submit")))};var L=function(){var e=Object(r.useState)(),t=Object(u.a)(e,2),a=t[0],c=t[1],s=Object(l.f)(),o=Object(r.useState)(),m=Object(u.a)(o,2),p=m[0],d=m[1],h=JSON.parse(localStorage.getItem("jwt")),b=Object(r.useState)(h.user._id?"".concat("https://socialnetwork-mats.herokuapp.com","/users/photo/").concat(h.user._id):null),g=Object(u.a)(b,2),w=g[0],v=(g[1],function(){var e=Object(E.a)(f.a.mark((function e(t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(r=new FormData).append("photo",a),n={Authorization:"Bearer ".concat(h.token),"Content-type":"multipart/form-data"},e.prev=4,e.next=7,i.a.post("".concat("https://socialnetwork-mats.herokuapp.com","/users/upload-photo/").concat(h.user._id),r,{headers:n});case 7:s.go(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}());return n.a.createElement("div",null,n.a.createElement("form",{onSubmit:v},n.a.createElement("label",{for:"photo"},"Profile Photo"),n.a.createElement("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files,a=t[t.length-1];a&&(c(a),d(URL.createObjectURL(a)))}}),n.a.createElement("img",{src:p,style:{height:100}}),n.a.createElement("input",{type:"submit"})),n.a.createElement("img",{src:w,style:{height:100}}),n.a.createElement(A,{editName:"Name"}),n.a.createElement(A,{editName:"Email"}),n.a.createElement(A,{editName:"NewPassword"}))};var B=function(){var e=Object(g.a)(),t=e.register,a=e.handleSubmit,c=e.errors,s=Object(r.useState)(),o=Object(u.a)(s,2),m=o[0],p=o[1],d=Object(r.useState)(),h=Object(u.a)(d,2),b=h[0],w=h[1],v=Object(r.useState)(!1),j=Object(u.a)(v,2),O=j[0],N=j[1],y=Object(l.h)().userId,S=JSON.parse(localStorage.getItem("jwt")),x=Object(l.f)(),_=function(){var e=Object(E.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new FormData).append("image",b),a.append("title",t.title),a.append("body",t.body),a.append("username",S.user.username),e.next=8,i.a.post("".concat("https://socialnetwork-mats.herokuapp.com","/posts/id=").concat(y),a);case 8:N(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return y!==S.user._id&&x.goBack(),n.a.createElement("div",{className:"container"},n.a.createElement("h2",{className:"mt-5 mb-5"},"Create Post"),n.a.createElement("form",{onSubmit:a(_)},n.a.createElement("label",{for:"photo",style:{display:"block"}},"Post Image"),n.a.createElement("input",{style:{display:"block"},type:"file",accept:"image/*",onChange:function(e){var t=e.target.files,a=t[t.length-1];a&&(w(a),p(URL.createObjectURL(a)))}}),n.a.createElement("img",{src:m,style:{height:100}}),n.a.createElement(k,{type:"text",name:"Title",register:t,errors:c}),n.a.createElement(k,{type:"text",name:"Body",register:t,errors:c}),O&&n.a.createElement("p",{style:{color:"green"}},"Post successfuly created"),n.a.createElement("button",{className:"btn btn-raised btn-primary"},"Submit")))};var Y=function(){var e=Object(l.h)().postId.split("-").pop(),t=Object(r.useState)(),a=Object(u.a)(t,2),c=a[0],s=a[1];return Object(r.useEffect)((function(){i.a.get("".concat("https://socialnetwork-mats.herokuapp.com","/posts/post=").concat(e)).then((function(e){var t=e.data;return s(t)})).catch((function(e){return console.log(e.message)}))}),[]),c?n.a.createElement("div",null,n.a.createElement("h4",null,c.title),n.a.createElement("p",null,c.body),c.image&&n.a.createElement("img",{src:"".concat("https://socialnetwork-mats.herokuapp.com","/posts/image=").concat(c._id)})):n.a.createElement("div",null)};var D=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(P,null),n.a.createElement(l.c,null,n.a.createElement(l.a,{exact:!0,path:"/",component:h}),n.a.createElement(l.a,{path:"/signup",component:N}),n.a.createElement(l.a,{path:"/signin",component:y}),n.a.createElement(l.a,{exact:!0,path:"/user/:userId",component:C}),n.a.createElement(l.a,{path:"/users/find=:name",component:J}),n.a.createElement(l.a,{path:"/user/post/:userId",component:B}),n.a.createElement(l.a,{path:"/user/delete/:userId",component:M}),n.a.createElement(l.a,{path:"/user/edit/:userId",component:L}),n.a.createElement(l.a,{path:"/post/:postId",component:Y})))};var F=function(){return n.a.createElement(o.a,null,n.a.createElement(D,null))};s.a.render(n.a.createElement(F,null),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.fa7a6de8.chunk.js.map